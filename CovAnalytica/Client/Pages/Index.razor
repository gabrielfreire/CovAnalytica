@page "/"

<PageTitle>Index</PageTitle>

<DashboardGrid Style="margin-top: 40px">
	<CellContent>
		<DashboardCell CellType="@CellType.FullScreen">
			<MudGrid>
				<MudItem xs="10" md="6">

					<MudAutocomplete Label="World countries" @bind-Value="selectedCountry"
									 SearchFunc="@SearchAsync" Immediate="true" ResetValueOnEmptyText="true"
									 AdornmentIcon="@Icons.Material.Filled.Search" AdornmentColor="MudBlazor.Color.Primary"/>
				</MudItem>
				<MudItem xs="2" md="4">
					<MudIconButton Variant="Variant.Filled" Icon="@Icons.Material.Filled.Add" OnClick="@(async () => await AddDatasetsAsync(selectedCountry))"/>
				</MudItem>
				<MudItem xs="12">
					<MudChipSet AllClosable="true" OnClose="OnChipClosed">
						@foreach (var value in addedCountries)
						{
							<MudChip Text="@value"></MudChip>
						}
					</MudChipSet>
				</MudItem>
				<MudItem xs="12">
					<MudText>Chart visibility</MudText>
					<MudCheckBox Label="Deaths Per Million" @bind-Checked="@VisibilityMap[typeof(DeathPerMillionTimeseriesLineChart)]"/>
					<MudCheckBox Label="Total cases" @bind-Checked="@VisibilityMap[typeof(TotalCasesTimeseriesLineChart)]"/>
					<MudCheckBox Label="Total vaccinations per hundred" @bind-Checked="@VisibilityMap[typeof(TotalVaccinationsPerHundredLineChart)]"/>
				</MudItem>
			</MudGrid>
		</DashboardCell>
		<DashboardCell CellType="@CellType.HalfScreen">
			<DeathPerMillionTimeseriesLineChart @bind-Visible="@VisibilityMap[typeof(DeathPerMillionTimeseriesLineChart)]" @ref="deathPMChart"/>

		</DashboardCell>
		<DashboardCell CellType="@CellType.HalfScreen">
			<TotalCasesTimeseriesLineChart @bind-Visible="@VisibilityMap[typeof(TotalCasesTimeseriesLineChart)]" @ref="totalCasesChart"/>

		</DashboardCell>
		<DashboardCell CellType="@CellType.HalfScreen">
			<TotalVaccinationsPerHundredLineChart @bind-Visible="@VisibilityMap[typeof(TotalVaccinationsPerHundredLineChart)]" @ref="totalVaccChart"/>

		</DashboardCell>
	</CellContent>

</DashboardGrid>