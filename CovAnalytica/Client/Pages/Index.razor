@page "/"

<PageTitle>Index</PageTitle>

<DashboardGrid Style="margin-top: 40px">
	<CellContent>
		<DashboardCell CellType="@CellType.FullScreen">
			<MudGrid>
				<MudItem xs="10" md="6">

					<MudAutocomplete Label="World countries" @bind-Value="selectedCountry"
									 SearchFunc="@SearchAsync" Immediate="true" ResetValueOnEmptyText="true"
									 AdornmentIcon="@Icons.Material.Filled.Search" AdornmentColor="MudBlazor.Color.Primary"/>
				</MudItem>
				<MudItem xs="2" md="4">
					<MudIconButton Variant="Variant.Filled" Icon="@Icons.Material.Filled.Add" OnClick="@(async () => await AddDatasetsAsync(selectedCountry))"/>
				</MudItem>
				<MudItem xs="12">
					<MudChipSet AllClosable="true" OnClose="OnChipClosed">
						@foreach (var value in addedCountries)
						{
							<MudChip Icon="@Icons.Material.Outlined.Search" Text="@value"/>
						}
					</MudChipSet>
				</MudItem>
				<MudItem xs="12">
					<MudText>Chart visibility</MudText>
					<MudCheckBox Label="Deaths Per Million" @bind-Checked="@VisibilityMap["DeathPerMillion"]"/>
					<MudCheckBox Label="Total cases" @bind-Checked="@VisibilityMap["TotalCases"]"/>
					<MudCheckBox Label="Total vaccinations per hundred" @bind-Checked="@VisibilityMap["TotalVaccinationsPerHundred"]"/>
					<MudCheckBox Label="Excess deaths per million" @bind-Checked="@VisibilityMap["ExcessDeathsPerMillion"]"/>
					<MudCheckBox Label="Excess Mortality" @bind-Checked="@VisibilityMap["ExcessMortality"]"/>
				</MudItem>
			</MudGrid>
		</DashboardCell>
		<DashboardCell CellType="@CellType.HalfScreen">
			<TimeseriesLinechart @bind-Visible="@VisibilityMap["DeathPerMillion"]" @ref="deathPMChart" Title="COVID-19 Deaths per million" YAxisLabel="Deaths Per Million"/>

		</DashboardCell>
		<DashboardCell CellType="@CellType.HalfScreen">
			<TimeseriesLinechart @bind-Visible="@VisibilityMap["TotalCases"]" @ref="totalCasesChart" Title="COVID-19 Cases per million" YAxisLabel="Cases per million"/>

		</DashboardCell>
		<DashboardCell CellType="@CellType.HalfScreen">
			<TimeseriesLinechart @bind-Visible="@VisibilityMap["TotalVaccinationsPerHundred"]" @ref="totalVaccChart" Title="COVID-19 Vaccinations per million" YAxisLabel="Vaccinations per million"/>

		</DashboardCell>
		<DashboardCell CellType="@CellType.HalfScreen">
			<TimeseriesLinechart @bind-Visible="@VisibilityMap["ExcessDeathsPerMillion"]" @ref="excessDeathPMChart" Title="COVID-19 Excess death per million" YAxisLabel="Excess death per million"/>

		</DashboardCell>
		<DashboardCell CellType="@CellType.HalfScreen">
			<TimeseriesLinechart @bind-Visible="@VisibilityMap["ExcessMortality"]" @ref="excessDeathChart" Title="COVID-19 Excess Mortality" YAxisLabel="Excess Mortality"/>

		</DashboardCell>
	</CellContent>

</DashboardGrid>